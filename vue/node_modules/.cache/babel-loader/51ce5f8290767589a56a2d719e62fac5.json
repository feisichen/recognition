{"ast":null,"code":"import { ArrowDown } from '@element-plus/icons-vue'; //图标而已\n\nimport { User } from '@element-plus/icons-vue';\nimport { Search } from '@element-plus/icons-vue';\nimport request from \"@/utils/request\";\nexport default {\n  name: \"Header\",\n  components: {\n    ArrowDown,\n    User,\n    Search\n  },\n\n  data() {\n    return {\n      currentUser: sessionStorage.getItem(\"currentName\"),\n      departmentName: sessionStorage.getItem(\"currentDepName\"),\n      flag: JSON.parse(sessionStorage.getItem(\"flag\")),\n      dialogVisible: false,\n      form: {},\n      search: '',\n      recIndex: '/recognition',\n      infoIndex: '/person'\n    };\n  },\n\n  created() {\n    if (sessionStorage.getItem('currentId') == null || sessionStorage.getItem('currentId') == \"null\") {\n      this.recIndex = '/login';\n      this.infoIndex = '/login';\n    }\n  },\n\n  methods: {\n    recwarning() {\n      if (sessionStorage.getItem('currentId') == null || sessionStorage.getItem('currentId') == \"null\") {\n        this.recIndex = '/login';\n        this.$message({\n          type: \"warning\",\n          message: \"请先登录\"\n        });\n      } else {\n        this.recIndex = '/recognition';\n      }\n    },\n\n    infowarning() {\n      if (sessionStorage.getItem('currentId') == null || sessionStorage.getItem('currentId') == \"null\") {\n        this.infoIndex = '/login';\n        this.$message({\n          type: \"warning\",\n          message: \"请先登录\"\n        });\n      } else {\n        this.infoIndex = '/person';\n      }\n    },\n\n    logout() {\n      this.currentUser = '';\n      this.flag = true;\n      sessionStorage.setItem(\"flag\", 'true');\n      sessionStorage.setItem(\"currentName\", '');\n      sessionStorage.setItem(\"currentId\", \"null\");\n      this.menuIndex = '/login';\n      this.$router.replace('/home');\n    },\n\n    gotolinklogin() {\n      //指定跳转地址\n      this.$router.replace('/login');\n    },\n\n    gotolinkregister() {\n      //指定跳转地址\n      this.$router.replace('/register');\n    },\n\n    changePwd() {\n      this.form = {};\n      this.form.id = sessionStorage.getItem(\"currentId\");\n      this.form.name = sessionStorage.getItem(\"currentName\");\n      this.dialogVisible = true;\n    },\n\n    update() {\n      if (this.form.password != this.form.confirm) {\n        this.$message({\n          type: \"error\",\n          message: \"两次密码不一致，请重新输入\"\n        });\n        this.form.password = \"\";\n        this.form.confirm = \"\";\n        return;\n      }\n\n      request.put(\"/user\", this.form).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n      this.dialogVisible = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ArrowDown","User","Search","request","name","components","data","currentUser","sessionStorage","getItem","departmentName","flag","JSON","parse","dialogVisible","form","search","recIndex","infoIndex","created","methods","recwarning","$message","type","message","infowarning","logout","setItem","menuIndex","$router","replace","gotolinklogin","gotolinkregister","changePwd","id","update","password","confirm","put","then","res","code","msg"],"sourceRoot":"","sources":["D:\\code\\Java\\image_recognition\\vue\\src\\components\\Header.vue"],"sourcesContent":["\n<template>\n  <el-menu\n      router\n      default-active=\"/home\"\n      class=\"el-menu-demo\"\n      mode=\"horizontal\"\n      background-color=\"rgba(255,255,255,0)\"\n      font-size=\"x-large\"\n      text-color=\"#fff\"\n      active-text-color=\"#ffd04b\"\n      @select=\"handleSelect\"\n      style=\"border:0!important;\"\n  >\n    <div style=\"margin: auto\"></div>\n    <el-menu-item  style=\"color:#ffd04b;font-size: 30px;\">遥感图像小样本分类平台</el-menu-item>\n    <el-menu-item index=\"/home\" >首页</el-menu-item>\n<!--          <el-sub-menu index=\"2\"  >-->\n<!--            <template #title  >图书</template>-->\n<!--            <el-menu-item index=\"book\" style=\"color:black\">书库</el-menu-item>-->\n<!--            <el-menu-item index=\"bookupload\" style=\"color:black\">上传图书</el-menu-item>-->\n<!--          </el-sub-menu>-->\n<!--    <el-menu-item index=\"/book\" style=\"font-size: large;\">书库</el-menu-item>-->\n    <el-menu-item :index=\"recIndex\" @click=\"recwarning\">\n      识别\n    </el-menu-item>\n<!--    <el-menu-item index=\"/AboutView\">-->\n<!--      资讯-->\n<!--    </el-menu-item>-->\n    <el-menu-item :index=\"infoIndex\" @click=\"infowarning\">\n      个人中心\n    </el-menu-item>\n    <!--      <el-sub-menu index=\"2\">-->\n    <!--        <template #title >图书</template>-->\n    <!--        <el-menu-item index=\"book\">书库</el-menu-item>-->\n    <!--        <el-menu-item index=\"bookupload\">上传图书</el-menu-item>-->\n    <!--      </el-sub-menu>-->\n<!--    <el-menu-item index=\"/aboutview\" >关于我们</el-menu-item>-->\n    <div style=\"margin: auto\"></div>\n<!--      <el-input style=\"margin:13px 10px 10px 80px;color:rgba(255,255,255,0)\" v-model=\"search\" placeholder=\"Please input\" class=\"searchinput\" />-->\n<!--    <el-button-->\n<!--        style=\"margin:13px 100px 10px 1px;border-radius:30px;\"-->\n<!--        type=\"text\"-->\n<!--        font-color=\"#fff\"-->\n<!--    >搜索</el-button>-->\n\n<!--    <el-button style=\"margin:1px 10px;height: auto; \" @click=\"search\">搜索</el-button>-->\n    <el-icon v-if=\"flag == false\" style=\"margin:1px 1px;height: auto;font-size: larger;color: #ffffff\" >\n      <User/>\n    </el-icon>\n    <el-dropdown :disabled=\"flag\" style=\"margin:18px 10px; height: auto;\">\n    <span class=\"el-dropdown-link\" style=\" color: #fffffb\">\n<!--      <el-icon class=\"el-icon&#45;&#45;right\"><arrow-down/></el-icon>-->\n      <el-button\n                 style=\"height: 12px\"\n                 type=\"text\"\n                 font-color=\"#fff\"\n      >{{ currentUser }}</el-button>\n    </span>\n      <template #dropdown>\n        <el-dropdown-menu>\n          <el-dropdown-item @click=\"changePwd\">修改密码</el-dropdown-item>\n          <el-dropdown-item @click=\"logout\">退出登录</el-dropdown-item>\n        </el-dropdown-menu>\n      </template>\n    </el-dropdown>\n\n\n    <el-button @click=\"gotolinklogin\" color=\"#ffd04b\" v-if=\"flag == true||flag == null\" style=\"margin:13px 10px; height: auto; border-radius:30px;\">登录</el-button>\n    <el-button @click=\"gotolinkregister\" color=\"#ffd04b\" v-if=\"flag == true||flag == null\" style=\"margin:13px 10px; height: auto; border-radius:30px;\">注册</el-button>\n    <!--      <el-sub-menu index=\"8\" style=\"margin-left:auto;\">-->\n    <!--        <template #title>-->\n    <!--          <el-icon>-->\n    <!--          <User/>-->\n    <!--        </el-icon>-->\n    <!--        </template>-->\n    <!--        <el-menu-item index=\"2-3\" style=\"background-color:#ffd04b\">个人中心</el-menu-item>-->\n    <!--        <el-menu-item index=\"2-1\" style=\"background-color:#ffd04b\">修改密码</el-menu-item>-->\n    <!--        <el-menu-item index=\"2-2\" style=\"background-color:#ffd04b\">退出登陆</el-menu-item>-->\n    <!--      </el-sub-menu>-->\n    <div style=\"margin: auto\"></div>\n\n  </el-menu>\n\n  <el-dialog v-model=\"dialogVisible\" title=\"修改密码\" width=\"30%\">\n    <el-form :model=\"form\" label-width=\"120px\">\n<!--      <el-form-item label=\"ID\">-->\n<!--        <el-input v-model=\"form.id\" style=\"width: 80%;\" readonly/>-->\n<!--      </el-form-item>-->\n      <el-form-item label=\"昵称\">\n        <el-input v-model=\"form.name\" style=\"width: 80%;\" readonly/>\n      </el-form-item>\n      <el-form-item label=\"输入密码\">\n        <el-input v-model=\"form.password\" style=\"width: 80%;\" type=\"password\"/>\n      </el-form-item>\n      <el-form-item label=\"确认密码\">\n        <el-input v-model=\"form.confirm\" style=\"width: 80%;\" type=\"password\"/>\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <span>\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"update\">确 定</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n\n<script>\nimport {ArrowDown} from '@element-plus/icons-vue'\n//图标而已\nimport {User} from '@element-plus/icons-vue'\nimport {Search} from '@element-plus/icons-vue'\n\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Header\",\n  components: {\n    ArrowDown,\n    User,\n    Search\n  },\n  data() {\n    return {\n      currentUser: sessionStorage.getItem(\"currentName\"),\n      departmentName: sessionStorage.getItem(\"currentDepName\"),\n      flag:JSON.parse(sessionStorage.getItem(\"flag\")),\n      dialogVisible: false,\n      form: {},\n      search:'',\n      recIndex: '/recognition',\n      infoIndex: '/person'\n    }\n  },\n  created(){\n    if (sessionStorage.getItem('currentId') == null||sessionStorage.getItem('currentId') == \"null\") {\n      this.recIndex = '/login';\n      this.infoIndex = '/login'\n    }\n  },\n  methods: {\n    recwarning(){\n      if (sessionStorage.getItem('currentId') == null||sessionStorage.getItem('currentId') == \"null\") {\n        this.recIndex = '/login'\n        this.$message({\n          type: \"warning\",\n          message: \"请先登录\"\n        })\n      }\n      else{\n        this.recIndex = '/recognition'\n      }\n    },\n    infowarning(){\n      if (sessionStorage.getItem('currentId') == null||sessionStorage.getItem('currentId') == \"null\") {\n        this.infoIndex = '/login'\n        this.$message({\n          type: \"warning\",\n          message: \"请先登录\"\n        })\n      }\n      else{\n        this.infoIndex = '/person'\n      }\n    },\n    logout(){\n      this.currentUser = '';\n      this.flag = true;\n      sessionStorage.setItem(\"flag\", 'true')\n      sessionStorage.setItem(\"currentName\", '')\n      sessionStorage.setItem(\"currentId\", \"null\")\n      this.menuIndex = '/login'\n      this.$router.replace('/home')\n    },\n    gotolinklogin(){\n      //指定跳转地址\n      this.$router.replace('/login')\n    },\n    gotolinkregister(){\n      //指定跳转地址\n      this.$router.replace('/register')\n    },\n    changePwd() {\n      this.form = {}\n      this.form.id = sessionStorage.getItem(\"currentId\");\n      this.form.name = sessionStorage.getItem(\"currentName\");\n      this.dialogVisible = true;\n    },\n    update() {\n      if (this.form.password != this.form.confirm) {\n        this.$message({\n          type: \"error\",\n          message: \"两次密码不一致，请重新输入\"\n        })\n        this.form.password = \"\"\n        this.form.confirm = \"\"\n        return;\n      }\n        request.put(\"/user\", this.form).then(res => {\n          if (res.code === '0') {\n            this.$message({\n              type: \"success\",\n              message: \"修改成功\"\n            })\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            })\n          }\n        })\n      this.dialogVisible = false\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.searchinput{\n  width:170px;\n  border-radius:30px;\n}\n.el-button--text {\n  border-color: transparent;\n  color:#fff;\n  background: 0 0;\n  padding-left: 0;\n  padding-right: 0;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}