{"ast":null,"code":"import { ArrowLeft } from '@element-plus/icons-vue';\nimport request from \"@/utils/request\";\nimport * as echarts from \"echarts\";\nexport default {\n  name: \"TeacherGrade\",\n\n  data() {\n    return {\n      ArrowLeft,\n      id: sessionStorage.getItem(\"id\"),\n      courseId: sessionStorage.getItem(\"currentCourse\"),\n      courseName: sessionStorage.getItem(\"currentCourseName\"),\n      teacherId: sessionStorage.getItem(\"currentId\"),\n      teacherName: sessionStorage.getItem(\"currentName\"),\n      term: sessionStorage.getItem(\"currentTerm\"),\n      time: sessionStorage.getItem(\"currentTime\"),\n      weight: sessionStorage.getItem(\"currentWeight\"),\n      credit: sessionStorage.getItem(\"currentCredit\"),\n      limitNum: sessionStorage.getItem(\"currentLimitNum\"),\n      currentNum: sessionStorage.getItem(\"currentCurrentNum\"),\n      checked: false,\n      tableData: [],\n      grade1: null,\n      grade2: null,\n      row: {},\n      isequal: true,\n      isvalid: true,\n      badGrade: false,\n      disagreeGrade: false\n    };\n  },\n\n  created() {\n    this.load();\n  },\n\n  methods: {\n    checkchange() {\n      console.log(this.tableData);\n    },\n\n    load() {\n      request.get(\"/grade/forGrade\", {\n        params: {\n          term: this.term,\n          courseId: this.courseId,\n          teacherId: this.teacherId,\n          time: this.time\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.data.list;\n        this.total = res.data.total;\n      });\n    },\n\n    save() {\n      let index = 0;\n      this.isvalid = true;\n      this.isequal = true;\n\n      for (index = 0; index < this.tableData.length; index++) {\n        alert(this.this.tableData[index].checked);\n\n        if (this.tableData[index].checked === false) {\n          if (this.tableData[index].grade1 !== this.tableData[index].grade2) {\n            this.isequal = false;\n          }\n\n          if (this.tableData[index].grade1 > 100 || this.tableData[index].grade1 < 0 || this.tableData[index].grade2 > 100 || this.tableData[index].grade2 < 0 || this.tableData[index].grade1 === undefined || this.tableData[index].grade2 === undefined) {\n            this.isvalid = false;\n          }\n        } else {\n          this.tableData[index].grade1 = -1;\n        }\n      }\n\n      if (this.isvalid === true && this.isequal === true) {\n        for (index = 0; index < this.tableData.length; index++) {\n          request.get(\"/grade/usualGrade\", {\n            params: {\n              term: this.term,\n              courseId: this.courseId,\n              teacherId: this.teacherId,\n              time: this.time,\n              studentId: this.tableData[index].id,\n              grade: this.tableData[index].grade1\n            }\n          }).then(res => {});\n        }\n\n        this.badGrade = false;\n        this.disagreeGrade = false;\n        this.$message({\n          type: 'success',\n          message: '平时成绩提交成功'\n        });\n      } else if (this.isvalid === false) {\n        this.badGrade = true;\n      } else if (this.isequal === false) {\n        this.disagreeGrade = true;\n      }\n    },\n\n    back() {\n      this.$router.push('/teacherGrade');\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ArrowLeft","request","echarts","name","data","id","sessionStorage","getItem","courseId","courseName","teacherId","teacherName","term","time","weight","credit","limitNum","currentNum","checked","tableData","grade1","grade2","row","isequal","isvalid","badGrade","disagreeGrade","created","load","methods","checkchange","console","log","get","params","then","res","list","total","save","index","length","alert","this","undefined","studentId","grade","$message","type","message","back","$router","push"],"sourceRoot":"","sources":["D:\\code\\Java\\class_choose\\vue\\src\\views\\UsualGrade.vue"],"sourcesContent":["<template>\r\n  <div style=\"margin: 10px;\">\r\n    <el-button type=\"primary\" plain :icon=\"ArrowLeft\"\r\n               @click=\"back\">返回\r\n    </el-button>\r\n    <div style=\"text-align: center;\">\r\n      <h1 style=\"color: #409EFF;\">学生名单</h1>\r\n      <span >\r\n        课程号：<ins style=\"color: ;\">&nbsp;{{ id }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        课程名：<ins>&nbsp;{{ courseName }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        学期：<ins>&nbsp;{{ term }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        <!--        <br><br>-->\r\n        学分：<ins>&nbsp;{{ credit }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        教师号：<ins>&nbsp;{{ teacherId }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        教师名：<ins>&nbsp;{{ teacherName }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        时间：<ins>&nbsp;{{ time }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        考试成绩权重：<ins>&nbsp;{{ weight }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        <!--        <br><br>-->\r\n        选课人数上限：<ins>&nbsp;{{ limitNum }}&nbsp;</ins>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        当前选课人数：<ins>&nbsp;{{ currentNum }}&nbsp;</ins>\r\n      </span>\r\n      <hr>\r\n\r\n      <!--表格-->\r\n      <el-table :data=\"tableData\" border stripe style=\"width: 100%;\">\r\n        <el-table-column prop=\"id\" label=\"学生学号\" sortable/>\r\n        <el-table-column prop=\"name\" label=\"学生姓名\"/>\r\n        <el-table-column fixed=\"right\" label=\"平时成绩\" width=\"440px\">\r\n          <template #default=\"scope\">\r\n            <el-input v-model=\"scope.row.grade1\" placeholder=\"请输入成绩\"  clearable/>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column fixed=\"right\" label=\"确认平时成绩\" width=\"440px\">\r\n          <template #default=\"scope\">\r\n            <el-input v-model=\"scope.row.grade2\" placeholder=\"请输入成绩\"  clearable/>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column fixed=\"right\" label=\"是否不计平时成绩\" >\r\n          <template #default=\"scope\">\r\n            <el-checkbox v-model=\"scope.row.checked\" @change=\"checkchange\" >不计平时成绩</el-checkbox>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <el-row>\r\n      <el-col :span=\"12\">\r\n        <div style=\"margin: 10px 10px 10px; font-size: 10px; color: rgb(96, 98, 102);\">选课人数：{{ currentNum }}</div>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <div style=\"margin-top: 15px; margin-left: 20px; color: red;\" v-if=\"badGrade\">输入成绩不合法，请确认！</div>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <div style=\"margin-top: 15px; margin-left: 20px; color: red;\" v-if=\"disagreeGrade\">两次成绩不一致，请确认！</div>\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-button style=\"margin: 10px;\" type=\"primary\" plain @click=\"save\">提交</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ArrowLeft} from '@element-plus/icons-vue'\r\nimport request from \"@/utils/request\";\r\nimport * as echarts from \"echarts\";\r\n\r\nexport default {\r\n  name: \"TeacherGrade\",\r\n  data() {\r\n    return {\r\n      ArrowLeft,\r\n      id: sessionStorage.getItem(\"id\"),\r\n      courseId: sessionStorage.getItem(\"currentCourse\"),\r\n      courseName: sessionStorage.getItem(\"currentCourseName\"),\r\n      teacherId: sessionStorage.getItem(\"currentId\"),\r\n      teacherName: sessionStorage.getItem(\"currentName\"),\r\n      term: sessionStorage.getItem(\"currentTerm\"),\r\n      time: sessionStorage.getItem(\"currentTime\"),\r\n      weight: sessionStorage.getItem(\"currentWeight\"),\r\n      credit: sessionStorage.getItem(\"currentCredit\"),\r\n      limitNum: sessionStorage.getItem(\"currentLimitNum\"),\r\n      currentNum: sessionStorage.getItem(\"currentCurrentNum\"),\r\n\r\n      checked: false,\r\n      tableData: [],\r\n      grade1: null,\r\n      grade2: null,\r\n      row: {},\r\n      isequal: true,\r\n      isvalid: true,\r\n      badGrade: false,\r\n      disagreeGrade: false\r\n    }\r\n  },\r\n  created() {\r\n    this.load();\r\n  },\r\n  methods: {\r\n    checkchange(){\r\n      console.log(this.tableData);\r\n    },\r\n    load() {\r\n      request.get(\"/grade/forGrade\", {\r\n        params: {\r\n          term: this.term,\r\n          courseId: this.courseId,\r\n          teacherId: this.teacherId,\r\n          time: this.time\r\n        }\r\n      }).then(res => {\r\n        console.log(res);\r\n        this.tableData = res.data.list;\r\n        this.total = res.data.total;\r\n      })\r\n    },\r\n    save() {\r\n      let index=0;\r\n      this.isvalid = true;\r\n      this.isequal = true;\r\n      for(index=0;index < this.tableData.length;index++){\r\n        alert(this.this.tableData[index].checked);\r\n        if(this.tableData[index].checked === false){\r\n          if(this.tableData[index].grade1 !== this.tableData[index].grade2){\r\n            this.isequal = false;\r\n          }\r\n          if(this.tableData[index].grade1 > 100 || this.tableData[index].grade1 < 0 ||this.tableData[index].grade2 > 100 || this.tableData[index].grade2 < 0 || this.tableData[index].grade1 === undefined || this.tableData[index].grade2 === undefined){\r\n            this.isvalid = false;\r\n          }\r\n        }else{\r\n          this.tableData[index].grade1 = -1\r\n        }\r\n      }\r\n      if(this.isvalid === true && this.isequal === true){\r\n        for(index=0;index < this.tableData.length;index++){\r\n          request.get(\"/grade/usualGrade\", {\r\n            params: {\r\n              term:this.term,\r\n              courseId:this.courseId,\r\n              teacherId:this.teacherId,\r\n              time:this.time,\r\n              studentId:this.tableData[index].id,\r\n              grade:this.tableData[index].grade1\r\n            }\r\n          }).then(res => {\r\n          })\r\n        }\r\n        this.badGrade = false;\r\n        this.disagreeGrade = false;\r\n        this.$message({\r\n          type: 'success',\r\n          message: '平时成绩提交成功'\r\n        })\r\n      }\r\n      else if(this.isvalid === false){\r\n        this.badGrade = true;\r\n      }\r\n      else if(this.isequal === false){\r\n        this.disagreeGrade = true;\r\n      }\r\n    },\r\n\r\n    back() {\r\n      this.$router.push('/teacherGrade');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}