{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"bg\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = {\n  style: {\n    \"display\": \"flex\"\n  }\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-upload__text\"\n}, [/*#__PURE__*/_createTextVNode(\" 拖到这里 /\"), /*#__PURE__*/_createElementVNode(\"em\", null, \"点击上传\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-upload__tip\"\n}, [/*#__PURE__*/_createTextVNode(\" jpg/png files with a size less than 500kb \"), /*#__PURE__*/_createCommentVNode(\"          <el-button @click=\\\"downloadTxt\\\"\"), /*#__PURE__*/_createCommentVNode(\"                     type=\\\"success\\\"\"), /*#__PURE__*/_createCommentVNode(\"                     v-if=\\\"downloadTxtButtonFlag == 1\\\">下载翻译文件</el-button>\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  style: {\n    \"white-space\": \"pre-wrap\",\n    \"margin\": \"50px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Plus = _resolveComponent(\"Plus\");\n\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n\n  const _component_el_card = _resolveComponent(\"el-card\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createVNode(_component_el_card, {\n    class: \"upcard\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_upload, {\n      class: \"upload-demo\",\n      drag: \"\",\n      action: \"http://localhost:9090/file/upload\",\n      \"on-success\": $options.handleAvatarSuccess,\n      \"list-type\": \"picture\",\n      multiple: \"\"\n    }, {\n      tip: _withCtx(() => [_hoisted_4]),\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        class: \"el-icon--upload\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_Plus)]),\n        _: 1\n        /* STABLE */\n\n      }), _hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"on-success\"]), _createElementVNode(\"div\", _hoisted_5, _toDisplayString($data.word), 1\n    /* TEXT */\n    )])]),\n    _: 1\n    /* STABLE */\n\n  })], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","class","style","_createCommentVNode","_hoisted_1","_createVNode","_component_el_card","_component_el_upload","drag","action","$options","multiple","tip","_hoisted_4","_component_el_icon","_component_Plus","_hoisted_3","_toDisplayString","$data"],"sourceRoot":"","sources":["D:\\code\\Java\\image_recognition\\vue\\src\\views\\Recognition.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg\"></div>\r\n  <el-card class=\"upcard\">\r\n    <div style=\"display: flex\">\r\n    <el-upload\r\n        class=\"upload-demo\"\r\n        drag\r\n        action=\"http://localhost:9090/file/upload\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        list-type=\"picture\"\r\n        multiple\r\n    >\r\n      <el-icon class=\"el-icon--upload\"><Plus/></el-icon>\r\n      <div class=\"el-upload__text\">\r\n        拖到这里 /<em>点击上传</em>\r\n      </div>\r\n      <template #tip>\r\n        <div class=\"el-upload__tip\">\r\n          jpg/png files with a size less than 500kb\r\n<!--          <el-button @click=\"downloadTxt\"-->\r\n<!--                     type=\"success\"-->\r\n<!--                     v-if=\"downloadTxtButtonFlag == 1\">下载翻译文件</el-button>-->\r\n        </div>\r\n      </template>\r\n    </el-upload>\r\n    <div style=\"white-space: pre-wrap;margin: 50px\">{{word}}</div>\r\n    </div>\r\n  </el-card>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport {Plus} from '@element-plus/icons-vue';\r\nimport request from \"@/utils/request\";\r\nimport { filesaver } from 'file-saver';\r\n\r\nexport default {\r\n  name: \"recognition\",\r\n  components: {Plus},\r\n  data() {\r\n    return {\r\n      url: \"\",\r\n      path:'',\r\n      deskpath:'',\r\n      word:[],\r\n      number:1,\r\n      downloadTxtButtonFlag:0,\r\n    }\r\n  },\r\n  methods:{\r\n    // downloadTxt() {\r\n    //   let str = this.word;\r\n    //   let strData = new Blob([str], { type: 'text/plain;charset=utf-8' });\r\n    //   saveAs(strData, \"翻译文件.txt\");\r\n    // },\r\n    upload() {\r\n      console.log(this.deskpath)\r\n      request.get(\"/book/recognize\", {\r\n        params: {\r\n          path:this.deskpath\r\n        }\r\n      }).then(res => {\r\n        console.log(res);\r\n\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"上传成功\"\r\n          })\r\n          console.log(res.data[9])\r\n          this.word = this.word  +'['+ this.number+']:';\r\n          this.word = this.word  + res.data;\r\n          this.word = this.word  +'\\n';\r\n          this.number++;\r\n          this.downloadTxtButtonFlag = 1;\r\n\r\n        } else {\r\n          this.$message({\r\n            type: \"warning\",\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleAvatarSuccess(res)\r\n    {\r\n      console.log(this.url);\r\n      this.url = res;\r\n      this.path = this.url.split('/');\r\n      // console.log(this.path)\r\n      this.deskpath = 'D:/code/python/CloserLookFewShot-master/dataset/' + sessionStorage.getItem(\"currentId\");\r\n      // console.log(this.deskpath);\r\n      this.upload();\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.upcard{\r\n  align-content: center;\r\n  background-color: wheat;\r\n  width: 85%;\r\n  min-height: 550px;\r\n  height: 100%;\r\n  opacity: 0.8;\r\n  border-radius: 30px;\r\n  margin: 50px 0 60px 60px;\r\n\r\n\r\n  /* 为其整体设置接近透明的效果*/\r\n  background-color: #ffffff;\r\n  /* 设置box-shadow使其有立体感 */\r\n  /*box-shadow: 5px 5px 0 0 rgba(0, 0, 0, 1);*/\r\n\r\n  padding: 0 50px;\r\n}\r\n.bg {\r\n  width: 100%;\r\n  height: 580px;\r\n  background-color: #ffffff;\r\n  position: absolute;\r\n  margin-top: 58px;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: -1;\r\n  background-size: 100% 522px;\r\n  min-width: 1000px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}