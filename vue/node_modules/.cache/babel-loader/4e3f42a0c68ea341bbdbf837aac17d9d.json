{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"bg\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = {\n  style: {\n    \"display\": \"flex\"\n  }\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-upload__text\"\n}, [/*#__PURE__*/_createTextVNode(\" 拖到这里 /\"), /*#__PURE__*/_createElementVNode(\"em\", null, \"点击上传\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"el-upload__tip\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" jpg/png files with a size less than 500kb \");\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"下载翻译文件\");\n\nconst _hoisted_7 = {\n  style: {\n    \"white-space\": \"pre-wrap\",\n    \"margin\": \"50px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Plus = _resolveComponent(\"Plus\");\n\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n\n  const _component_el_card = _resolveComponent(\"el-card\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createVNode(_component_el_card, {\n    class: \"upcard\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_upload, {\n      class: \"upload-demo\",\n      drag: \"\",\n      action: \"http://localhost:9090/file/upload\",\n      \"on-success\": $options.handleAvatarSuccess,\n      \"list-type\": \"picture\",\n      multiple: \"\"\n    }, {\n      tip: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, $data.downloadTxtButtonFlag == 1 ? (_openBlock(), _createBlock(_component_el_button, {\n        key: 0,\n        onClick: $options.downloadTxt,\n        type: \"success\"\n      }, {\n        default: _withCtx(() => [_hoisted_6]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"])) : _createCommentVNode(\"v-if\", true)])]),\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        class: \"el-icon--upload\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_Plus)]),\n        _: 1\n        /* STABLE */\n\n      }), _hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"on-success\"]), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($data.word), 1\n    /* TEXT */\n    )])]),\n    _: 1\n    /* STABLE */\n\n  })], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","class","style","_hoisted_1","_createVNode","_component_el_card","_component_el_upload","drag","action","$options","multiple","tip","$data","_createBlock","_component_el_button","onClick","type","_component_el_icon","_component_Plus","_hoisted_3","_toDisplayString"],"sourceRoot":"","sources":["E:\\code\\springboot+vue\\class_choose_book1\\vue\\src\\views\\Recognition.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg\"></div>\r\n  <el-card class=\"upcard\">\r\n    <div style=\"display: flex\">\r\n    <el-upload\r\n        class=\"upload-demo\"\r\n        drag\r\n        action=\"http://localhost:9090/file/upload\"\r\n        :on-success=\"handleAvatarSuccess\"\r\n        list-type=\"picture\"\r\n        multiple\r\n    >\r\n      <el-icon class=\"el-icon--upload\"><Plus/></el-icon>\r\n      <div class=\"el-upload__text\">\r\n        拖到这里 /<em>点击上传</em>\r\n      </div>\r\n      <template #tip>\r\n        <div class=\"el-upload__tip\">\r\n          jpg/png files with a size less than 500kb\r\n          <el-button @click=\"downloadTxt\"\r\n                     type=\"success\"\r\n                     v-if=\"downloadTxtButtonFlag == 1\">下载翻译文件</el-button>\r\n        </div>\r\n      </template>\r\n    </el-upload>\r\n    <div style=\"white-space: pre-wrap;margin: 50px\">{{word}}</div>\r\n    </div>\r\n  </el-card>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport {Plus} from '@element-plus/icons-vue';\r\nimport request from \"@/utils/request\";\r\nimport { filesaver } from 'file-saver';\r\n\r\nexport default {\r\n  name: \"recognition\",\r\n  components: {Plus},\r\n  data() {\r\n    return {\r\n      url: \"\",\r\n      path:'',\r\n      deskpath:'',\r\n      word:[],\r\n      number:1,\r\n      downloadTxtButtonFlag:0,\r\n    }\r\n  },\r\n  methods:{\r\n    downloadTxt() {\r\n      let str = this.word;\r\n      let strData = new Blob([str], { type: 'text/plain;charset=utf-8' });\r\n      saveAs(strData, \"翻译文件.txt\");\r\n    },\r\n    upload() {\r\n      console.log(this.deskpath)\r\n      request.get(\"/book/recognize\", {\r\n        params: {\r\n          path:this.deskpath\r\n        }\r\n      }).then(res => {\r\n        console.log(res);\r\n\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"上传成功\"\r\n          })\r\n          console.log(res.data[9])\r\n          this.word = this.word  +'['+ this.number+']:';\r\n          this.word = this.word  + res.data;\r\n          this.word = this.word  +'\\n';\r\n          this.number++;\r\n          this.downloadTxtButtonFlag = 1;\r\n\r\n        } else {\r\n          this.$message({\r\n            type: \"warning\",\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleAvatarSuccess(res)\r\n    {\r\n      this.url = res;\r\n      console.log(this.url);\r\n      this.path = this.url.split('/');\r\n      this.deskpath = 'E:/code/springboot+vue/class_choose_book1/vue/public/image/' + this.path[4];\r\n      console.log(this.deskpath);\r\n      this.upload();\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.upcard{\r\n  align-content: center;\r\n  background-color: wheat;\r\n  width: 85%;\r\n  min-height: 550px;\r\n  height: 100%;\r\n  opacity: 0.8;\r\n  border-radius: 30px;\r\n  margin: 50px 0 60px 60px;\r\n\r\n\r\n  /* 为其整体设置接近透明的效果*/\r\n  background-color: #ffffff;\r\n  /* 设置box-shadow使其有立体感 */\r\n  /*box-shadow: 5px 5px 0 0 rgba(0, 0, 0, 1);*/\r\n\r\n  padding: 0 50px;\r\n}\r\n.bg {\r\n  width: 100%;\r\n  height: 580px;\r\n  background-color: #ffffff;\r\n  position: absolute;\r\n  margin-top: 58px;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: -1;\r\n  background-size: 100% 522px;\r\n  min-width: 1000px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}