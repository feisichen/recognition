{"ast":null,"code":"import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = {\n  style: {\n    \"display\": \"flex\"\n  }\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-upload__text\"\n}, [/*#__PURE__*/_createTextVNode(\" 拖到这里 /\"), /*#__PURE__*/_createElementVNode(\"em\", null, \"点击上传\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-upload__tip\"\n}, \" jpg/png files with a size less than 500kb \", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  style: {\n    \"white-space\": \"pre-wrap\",\n    \"margin\": \"50px\"\n  }\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"bg\"\n}, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Plus = _resolveComponent(\"Plus\");\n\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n\n  const _component_el_card = _resolveComponent(\"el-card\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.newClass = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.newClass]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.addClass && $options.addClass(...args))\n  }, \"Add Class\"), _hoisted_1, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.classes, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [_createVNode(_component_el_card, {\n      class: \"upcard\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_upload, {\n        class: \"upload-demo\",\n        drag: \"\",\n        action: \"http://localhost:9090/file/upload\",\n        \"on-success\": $options.handleAvatarSuccess,\n        \"list-type\": \"picture\",\n        multiple: \"\",\n        data: {}\n      }, {\n        tip: _withCtx(() => [_hoisted_4]),\n        default: _withCtx(() => [_createVNode(_component_el_icon, {\n          class: \"el-icon--upload\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_Plus)]),\n          _: 1\n          /* STABLE */\n\n        }), _hoisted_3]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"on-success\"]), _createElementVNode(\"div\", _hoisted_5, _toDisplayString($data.word), 1\n      /* TEXT */\n      )])]),\n      _: 1\n      /* STABLE */\n\n    })]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))]), _hoisted_6], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["_createElementVNode","style","class","type","$data","$event","onClick","$options","_hoisted_1","_createElementBlock","_Fragment","_renderList","item","index","key","_createVNode","_component_el_card","_component_el_upload","drag","action","multiple","data","tip","_hoisted_4","_component_el_icon","_component_Plus","_hoisted_3","_toDisplayString","_hoisted_6"],"sourceRoot":"","sources":["D:\\code\\Java\\image_recognition\\vue\\src\\views\\Recognition.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <input type=\"text\" v-model=\"newClass\">\r\n    <button @click=\"addClass\">Add Class</button>\r\n    <hr>\r\n    <div v-for=\"(item, index) in classes\" :key=\"index\">\r\n      <el-card class=\"upcard\">\r\n        <div style=\"display: flex\">\r\n          <el-upload\r\n              class=\"upload-demo\"\r\n              drag\r\n              action=\"http://localhost:9090/file/upload\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n              list-type=\"picture\"\r\n              multiple\r\n              :data=\"{  }\"\r\n          >\r\n            <el-icon class=\"el-icon--upload\"><Plus/></el-icon>\r\n            <div class=\"el-upload__text\">\r\n              拖到这里 /<em>点击上传</em>\r\n            </div>\r\n            <template #tip>\r\n              <div class=\"el-upload__tip\">\r\n                jpg/png files with a size less than 500kb\r\n              </div>\r\n            </template>\r\n          </el-upload>\r\n          <div style=\"white-space: pre-wrap;margin: 50px\">{{word}}</div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n  <div class=\"bg\"></div>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nimport {Plus} from '@element-plus/icons-vue';\r\nimport request from \"@/utils/request\";\r\nimport { filesaver } from 'file-saver';\r\n\r\nexport default {\r\n  name: \"recognition\",\r\n  components: {Plus},\r\n  data() {\r\n    return {\r\n      classes: [],\r\n      newClass: '',\r\n      url: \"\",\r\n      path:'',\r\n      deskpath:'',\r\n      word:[],\r\n      number:1,\r\n      downloadTxtButtonFlag:0,\r\n    }\r\n  },\r\n  methods:{\r\n    // downloadTxt() {\r\n    //   let str = this.word;\r\n    //   let strData = new Blob([str], { type: 'text/plain;charset=utf-8' });\r\n    //   saveAs(strData, \"翻译文件.txt\");\r\n    // },\r\n    addClass() {\r\n      if (this.newClass !== '') {\r\n        this.classes.push({ name: this.newClass, files: [] });\r\n        this.newClass = '';\r\n      }\r\n    },\r\n    upload() {\r\n      console.log(this.deskpath)\r\n      request.get(\"/book/recognize\", {\r\n        params: {\r\n          path:this.deskpath\r\n        }\r\n      }).then(res => {\r\n        console.log(res);\r\n\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"上传成功\"\r\n          })\r\n          console.log(res.data[9])\r\n          this.word = this.word  +'['+ this.number+']:';\r\n          this.word = this.word  + res.data;\r\n          this.word = this.word  +'\\n';\r\n          this.number++;\r\n          this.downloadTxtButtonFlag = 1;\r\n\r\n        } else {\r\n          this.$message({\r\n            type: \"warning\",\r\n            message: res.msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleAvatarSuccess(res)\r\n    {\r\n      console.log(this.url);\r\n      this.url = res;\r\n      this.path = this.url.split('/');\r\n      // console.log(this.path)\r\n      this.deskpath = 'D:/code/springboot+vue/image_recognition/vue/public/image/' + sessionStorage.getItem(\"currentId\");\r\n      // console.log(this.deskpath);\r\n      this.upload();\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.upcard{\r\n  align-content: center;\r\n  background-color: wheat;\r\n  width: 85%;\r\n  min-height: 550px;\r\n  height: 100%;\r\n  opacity: 0.8;\r\n  border-radius: 30px;\r\n  margin: 50px 0 60px 60px;\r\n\r\n\r\n  /* 为其整体设置接近透明的效果*/\r\n  background-color: #ffffff;\r\n  /* 设置box-shadow使其有立体感 */\r\n  /*box-shadow: 5px 5px 0 0 rgba(0, 0, 0, 1);*/\r\n\r\n  padding: 0 50px;\r\n}\r\n.bg {\r\n  width: 100%;\r\n  height: 580px;\r\n  background-color: #ffffff;\r\n  position: absolute;\r\n  margin-top: 58px;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: -1;\r\n  background-size: 100% 522px;\r\n  min-width: 1000px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}